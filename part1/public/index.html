<!DOCTYPE html>
<html lang="en">
<head>
  <title>My App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./stylesheets/style.css">
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
  <div id="app">
    <h1>Dog Walking Service</h1>
    <!-- <p>This is a simple Vue.js application.</p> -->
    <img :src="dogImg" alt="">
  </div>

  <script>
    const app = Vue.createApp({
      data() {
        return {
          notification: {
            visible: false,
            message: '',
            type: '' // 'success' or 'error'
          },
          dogImg: '',
        }
      },
      methods: {
        async getDogImg() {
          try {
            console.log('Fetching dog image...');
            const response = await fetch('https://dog.ceo/api/breeds/image/random');
            const result = await response.json();
            if (!response.ok) {
              throw new Error(result.error || 'Network response was not ok');
            }
            // deal with the result
            this.dogImg = result.message;
            console.log(this.dogImg);
            this.showNotification('Data fetched successfully!', 'success');
            return result.message;
          } catch (error) {
            console.error('Error fetching dog image:', error);
            this.showNotification('Failed to fetch data.', 'error');
          }
        },
        async getDogImg() {
          try {
            console.log('Fetching dog to walk...');
            const response = await fetch('/api/walkrequests/open');
            const result = await response.json();
            if (!response.ok) {
              throw new Error(result.error || 'Network response was not ok');
            }
            // deal with the result
            this.dogImg = result.message;
            console.log(this.dogImg);
            this.showNotification('Data fetched successfully!', 'success');
            return result.message;
          } catch (error) {
            console.error('Error fetching dog image:', error);
            this.showNotification('Failed to fetch data.', 'error');
          }
        },
        showNotification(msg, type) {
          this.notification.message = msg;
          this.notification.type = type;
          this.notification.visible = true;
          setTimeout(() => {
            this.notification.visible = false;
          }, 5000);
        },
      },
      mounted() {
        // this.getDogImg();
        this.showNotification('Test', 'success');
      }
    });
    app.mount('#app');
  </script>
</body>
</html>